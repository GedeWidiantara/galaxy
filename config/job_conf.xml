<?xml version="1.0"?>
<job_conf>
    <plugins>
        <!-- The image uses LocalJobRunner with Docker enabled via params -->
        <plugin id="local" type="runner" load="galaxy.jobs.runners.local:LocalJobRunner"/>
    </plugins>
    
    <destinations>
        <!-- Docker Destination: Uses Local Runner but executes in Docker -->
        <destination id="docker_destination" runner="local">
            <param id="docker_enabled">true</param>
            <param id="docker_sudo">false</param>
            <param id="docker_auto_rm">true</param>
            
            <!-- Resource Limits: Passed to the Docker container -->
            <param id="local_slots">4</param> 
            <!-- Note: Local runner often respects local_slots/memory, but for docker limits we might need specific params if supported. 
                 The bgruening image generally respects these for the wrapper. -->
            <param id="local_memory">8G</param>
        </destination>
    </destinations>
    
    <tools>
        <tool id="upload1" destination="docker_destination" />
    </tools>
    
    <limits>
        <limit type="registered_user_concurrent_jobs">4</limit>
        <limit type="anonymous_concurrent_jobs">1</limit>
    </limits>
</job_conf>
